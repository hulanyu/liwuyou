"use strict";!function(t){function i(t){var i=t.imgs,e=t.width,s=t.height,n=t.type,h=t.duration,r=t.isAutoPlay;this.imgs=i,this.len=i.length,this.width=e,this.height=s,this.type=n,this.duration=h,this.container=null,this.ul=null,this.lis=null,this.circles=null,this.prev=null,this.next=null,this.currentIndex=0,this.nextIndex=1,this.isAutoPlay=r||!0}i.prototype={constructor:i,init:function(i){for(var e='<div class="xm_carousel_container">\n\t\t\t\t\t<ul class="imgs">',s=0;s<this.len;s++)e+='<li><a href="'+this.imgs[s].href+'"><img src="'+this.imgs[s].src+'"></a></li>';e+='</ul>\n\t\t\t\t\t<div class="pages"></div>\n\t\t\t\t\t<div class="prev">&lt;</div>\n\t\t\t\t\t<div class="next">&gt;</div>\n\t\t\t\t</div>',t(i).html(e),this.container=t(".xm_carousel_container",i).css({width:this.width,height:this.height,overflow:"hidden"}),this.ul=t(".imgs",i).css({width:"fade"===this.type?this.width:this.width*this.len,height:this.height,position:"fade"===this.type?"relative":"absolute"}),this.lis=t(".imgs li",i).css({width:this.width,height:this.height}),"fade"===this.type?this.lis.css({position:"absolute",top:0,left:0,display:"none"}).first().show():this.lis.css({float:"left"});for(e="",s=0;s<this.len;s++)e+="<i></i>";this.circles=t(".pages",i).css({width:this.width}).html(e).children("i"),this.circles.first().addClass("current"),this.prev=t(".prev",i),this.next=t(".next",i),this.isAutoPlay&&this.autoPlay(),this.registerEventListener()},autoPlay:function(){var t=this;this.timer=setInterval(function(){t.move()},this.duration)},move:function(){"fade"===this.type?this.fade():this.slide()},fade:function(){this.lis.eq(this.currentIndex).fadeOut(),this.lis.eq(this.nextIndex).fadeIn(),this.circles.eq(this.currentIndex).removeClass("current"),this.circles.eq(this.nextIndex).addClass("current"),this.currentIndex=this.nextIndex,this.nextIndex++,this.nextIndex>=this.len&&(this.nextIndex=0)},slide:function(){var t=-1*this.width*this.nextIndex;this.ul.stop().animate({left:t}),this.circles.eq(this.currentIndex).removeClass("current"),this.circles.eq(this.nextIndex).addClass("current"),this.currentIndex=this.nextIndex,this.nextIndex++,this.nextIndex>=this.len&&(this.nextIndex=0)},registerEventListener:function(){var i=this;this.container.hover(function(){clearInterval(i.timer)},function(){i.timer=setInterval(function(){i.move()},i.duration)});var e=this;this.circles.mouseover(function(){var i=t(this).index();e.currentIndex!==i&&(e.nextIndex=i,e.move())}),this.prev.click(function(){i.nextIndex=i.currentIndex-1,i.nextIndex<0&&(i.nextIndex=i.len-1),i.move()}),this.next.click(function(){i.move()})}},t.fn.extend({carousel:function(e){this.each(function(s,n){new i(e).init(t(n))})}})}(jQuery);