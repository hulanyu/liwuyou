"use strict";require(["config"],function(){require(["jquery","template","cookie","fly","load"],function(t,e,i){t.getJSON("/mock/list.json",function(i){var c={products:i.res_body.data},r=e("list_template",c);t(".buy").html(r)}),t.cookie.json=!0,t(".buy").delegate(".add_to_cart","click",function(e){var i=t(this).parent(),c={id:i.children(".id").text(),title:i.children(".title").text(),price:i.children(".price").text(),amount:1,img:i.children("#img").attr("src")},r=t.cookie("products")||[],o=function(e,i){var c=-1;return t.each(i,function(t,i){if(i.id==e)return c=t,!1}),c}(c.id,r);-1===o?r.push(c):r[o].amount++,t.cookie("products",r,{expires:7,path:"/"});t('<img src="'+i.children("#img").attr("src")+'">').fly({start:{left:e.pageX,top:e.pageY},end:{left:t("#car").offset().left,top:t("#car").offset().top,width:0,height:0}})}),t(".buy").delegate("#img","click",function(t){location="/html/detail.html"})})});