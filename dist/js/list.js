"use strict";require(["config"],function(){require(["jquery","template","cookie","fly","load"],function(t,e,i){t.getJSON("/mock/list.json",function(i){var r={products:i.res_body.data},c=e("list_template",r);t(".buy").html(c)}),t.cookie.json=!0,t(".buy").delegate(".add_to_cart","click",function(e){var i=t(this).parent(),r={id:i.children(".id").text(),title:i.children(".title").text(),price:i.children(".price").text(),amount:1,img:i.children("#img").attr("src")},c=t.cookie("products")||[],o=function(e,i){var r=-1;return t.each(i,function(t,i){if(i.id==e)return r=t,!1}),r}(r.id,c);-1===o?c.push(r):c[o].amount++,t.cookie("products",c,{expires:7,path:"/"});t('<img src="'+i.children("#img").attr("src")+'">').fly({start:{left:e.pageX,top:e.pageY},end:{left:t("#car").offset().left,top:t("#car").offset().top,width:0,height:0}})}),t(".buy").delegate("#img","click",function(e){var i=t(this).parent().children(".id").text();t.cookie("id",i,{expires:7,path:"/"}),location="/html/detail.html"})})});